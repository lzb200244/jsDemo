<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>购物车</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css">
</head>
<body>
<div class="container my-5">
  <h1 class="mb-4">购物车</h1>
  <ul id="cart-items" class="list-group mb-3"></ul>
  <p id="total-price" class="fs-4 fw-bold mb-4">总价: 0</p>
  <button id="checkout-button" class="btn btn-primary">结算</button>
</div>
<script>
  // 商品数据
  const products = [
    {
      name: "商品1",
      price: 10
    },
    {
      name: "商品2",
      price: 20
    },
    {
      name: "商品3",
      price: 30
    }
  ];

  // 获取DOM元素
  const cartItems = document.getElementById("cart-items");
  const totalPrice = document.getElementById("total-price");
  const checkoutButton = document.getElementById("checkout-button");

  // 购物车数据
  const cart = {
    items: [],
    totalPrice: 0
  };

  // 渲染购物车
  function renderCart() {
    cartItems.innerHTML = "";
    for (let i = 0; i < cart.items.length; i++) {
      const item = cart.items[i];
      const li = document.createElement("li");
      li.classList.add("list-group-item", "d-flex", "justify-content-between", "align-items-center");
      li.innerHTML = `
      ${item.name}
      <span class="badge bg-primary rounded-pill">${item.price}</span>
      <span class="badge bg-secondary rounded-pill">${item.quantity}</span>
      <button class="btn btn-danger delete-button">删除</button>
    `;
      const deleteButton = li.querySelector(".delete-button");
      deleteButton.addEventListener("click", function() {
        removeFromCart(i);
      });
      cartItems.appendChild(li);
    }
    totalPrice.innerText = `总价: ${cart.totalPrice}`;
  }

  // 添加商品到购物车
  function addToCart(product) {
    let itemFound = false;
    for (let i = 0; i < cart.items.length; i++) {
      const item = cart.items[i];
      if (item.name === product.name) {
        item.quantity++;
        itemFound = true;
        break;
      }
    }
    if (!itemFound) {
      cart.items.push({
        name: product.name,
        price: product.price,
        quantity: 1
      });
    }
    cart.totalPrice += product.price;
    renderCart();
  }

  // 从购物车中移除商品
  function removeFromCart(index) {
    const item = cart.items[index];
    cart.items.splice(index, 1);
    cart.totalPrice -= item.price * item.quantity;
    renderCart();
  }

  // 为商品添加点击事件监听器
  for (let i = 0; i < products.length; i++) {
    const product = products[i];
    const button = document.createElement("button");
    button.classList.add("btn", "btn-primary", "me-3", "my-3");
    button.innerText = `添加 ${product.name} 到购物车 - 价格: ${product.price}`;
    button.addEventListener("click", function() {
      addToCart(product);
    });
    document.body.appendChild(button);
  }

  // 渲染初始的购物车
  renderCart();

</script>
</body>
</html>
